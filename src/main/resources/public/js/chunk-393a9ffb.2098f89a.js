(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-393a9ffb"],{"1f5a":function(e,t,a){},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[e.total>0?a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1)):e._e()],1)},r=[];a("163d");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(e,t,a){var n=l(),r=e-n,c=20,s=0;t="undefined"===typeof t?500:t;var u=function e(){s+=c;var l=Math.easeInOutQuad(s,n,r,t);o(l),s<t?i(e):a&&"function"===typeof a&&a()};u()}var s={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&c(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&c(0,800)}}},u=s,p=(a("3613"),a("623f")),d=Object(p["a"])(u,n,r,!1,null,"5a1061f0",null);t["a"]=d.exports},3613:function(e,t,a){"use strict";var n=a("5a15"),r=a.n(n);r.a},"37de":function(e,t,a){"use strict";var n=a("1f5a"),r=a.n(n);r.a},"5a15":function(e,t,a){},"707c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"30px 10px"}},[e.searchPage?a("Search",{on:{changePage:e.changePage,selectProject:e.selectProject}}):a("Add",{on:{changePage:e.changePage}})],1)},r=[],i=(a("f548"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-input",{staticStyle:{width:"15%","min-width":"200px"},attrs:{placeholder:"项目ID",name:"projectIdInput",clearable:""},model:{value:e.searchValue.projectId,callback:function(t){e.$set(e.searchValue,"projectId",t)},expression:"searchValue.projectId"}}),e._v(" "),a("el-input",{staticStyle:{width:"20%","min-width":"200px"},attrs:{placeholder:"项目名称",name:"projectNameInput",clearable:""},model:{value:e.searchValue.name,callback:function(t){e.$set(e.searchValue,"name",t)},expression:"searchValue.name"}}),e._v(" "),a("el-select",{staticStyle:{width:"15%","min-width":"120px"},attrs:{placeholder:"项目状态",name:"projectStatusInput",clearable:""},model:{value:e.searchValue.statusId,callback:function(t){e.$set(e.searchValue,"statusId",t)},expression:"searchValue.statusId"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:t}})})),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",name:"searchButton"},on:{click:e.search,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[a("i",{staticClass:"el-icon-search"}),e._v(" "),a("span",[e._v("搜索")])]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ROLE_PM"],expression:"['ROLE_PM']"}],attrs:{type:"primary",name:"newProjectButton"},on:{click:e.addProject}},[a("i",{staticClass:"el-icon-plus"}),e._v(" "),a("span",[e._v("新建项目")])])],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.table.data,"empty-text":"未参与项目"}},[a("el-table-column",{attrs:{fixed:"left",type:"index",index:e.indexMethod,align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"projectId",label:"项目ID",align:"center","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"name",label:"项目名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManagerName",label:"创建人",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scheduledDate",label:"开始时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusId",label:"项目状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[null!==n.statusId?a("span",[a("svg-icon",{attrs:{"icon-class":e.statusOptions[e.getStatusId(n.statusId)].svg}}),e._v(" "),a("span",[e._v(e._s(e.statusOptions[e.getStatusId(n.statusId)].label))])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.selectProject(n)}}},[e._v("进入项目")])]}}])})],1),e._v(" "),a("pagination",{attrs:{total:e.table.total,page:e.table.page,limit:e.table.limit},on:{"update:page":function(t){return e.$set(e.table,"page",t)},"update:limit":function(t){return e.$set(e.table,"limit",t)},pagination:e.getProjects}})],1)])}),o=[],l=(a("cc57"),a("2b45"),a("333d")),c=a("24d2"),s=a("cf45"),u={components:{Pagination:l["a"]},data:function(){return{loading:!1,searchValue:{projectId:"",name:"",statusId:""},statusOptions:this.Constant.projectStatus,table:{data:[],searchCondition:{projectId:null,name:null,statusId:null},total:0,page:1,limit:10}}},mounted:function(){this.getProjects()},methods:{indexMethod:function(e){return e+1},getStatusId:function(e){return parseInt(e.toString().charAt(0))},getProjects:function(){var e=this;this.loading=!0,Object(c["c"])({current:this.table.page,size:this.table.limit,searchCondition:this.table.searchCondition}).then((function(t){Object(s["b"])(t.data,e.table,e.setSearchValue())})).catch((function(e){console.error(e)})).finally((function(){e.loading=!1}))},setSearchValue:function(){this.searchValue.projectId=this.table.searchCondition.projectId,this.searchValue.name=this.table.searchCondition.name,this.searchValue.statusId=this.table.searchCondition.statusId},search:function(){this.table.searchCondition.projectId=Object(s["a"])(this.searchValue.projectId),this.table.searchCondition.name=Object(s["a"])(this.searchValue.name),this.table.searchCondition.statusId=Object(s["a"])(this.searchValue.statusId),this.table.page=1,this.getProjects()},addProject:function(){this.$emit("changePage")},selectProject:function(e){this.$emit("selectProject",e)}}},p=u,d=a("623f"),m=Object(d["a"])(p,i,o,!1,null,null,null),h=m.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-page-header",{attrs:{content:"立项申请"},on:{back:e.goBack}}),e._v(" "),a("el-form",{ref:"project",staticClass:"add-form",attrs:{model:e.project,rules:e.addProjectRules,"label-width":"90px","label-position":"left","hide-required-asterisk":!0}},[a("el-form",{ref:"projectInline",attrs:{model:e.project,rules:e.addProjectRules,inline:!0,"hide-required-asterisk":!0}},[a("el-form-item",{attrs:{label:"客户ID",prop:"clientId","label-width":"90px"}},[a("el-input",{model:{value:e.project.clientId,callback:function(t){e.$set(e.project,"clientId",t)},expression:"project.clientId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"研发类型",prop:"projectId"}},[a("el-select",{model:{value:e.project.projectId,callback:function(t){e.$set(e.project,"projectId",t)},expression:"project.projectId"}},e._l(e.projectTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1),e._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"预定时间",prop:"scheduledDate","label-width":"90px"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()<e.today}}},model:{value:e.project.scheduledDate,callback:function(t){e.$set(e.project,"scheduledDate",t)},expression:"project.scheduledDate"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"交付日",prop:"scheduledDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()<e.project.scheduledDate}}},model:{value:e.project.deliveryDate,callback:function(t){e.$set(e.project,"deliveryDate",t)},expression:"project.deliveryDate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"项目上级",prop:"superior"}},[a("el-input",{model:{value:e.project.superior,callback:function(t){e.$set(e.project,"superior",t)},expression:"project.superior"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主要里程碑",prop:"majorMilestone"}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:5,maxlength:"500","show-word-limit":""},model:{value:e.project.majorMilestone,callback:function(t){e.$set(e.project,"majorMilestone",t)},expression:"project.majorMilestone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采用技术",prop:"mainTechnique"}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:5,maxlength:"500","show-word-limit":""},model:{value:e.project.mainTechnique,callback:function(t){e.$set(e.project,"mainTechnique",t)},expression:"project.mainTechnique"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"业务领域",prop:"businessField"}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:5,maxlength:"500","show-word-limit":""},model:{value:e.project.businessField,callback:function(t){e.$set(e.project,"businessField",t)},expression:"project.businessField"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主要功能",prop:"mainFunction"}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:8,maxlength:"1000","show-word-limit":""},model:{value:e.project.mainFunction,callback:function(t){e.$set(e.project,"mainFunction",t)},expression:"project.mainFunction"}})],1)],1),e._v(" "),a("div",{attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addProject}},[e._v("添加")])],1)],1)},g=[],b=a("c466"),j={data:function(){return{project:{clientId:"",projectId:"D",name:"",scheduledDate:new Date,deliveryDate:new Date,superior:"",majorMilestone:"",mainTechnique:"",businessField:"",mainFunction:""},addProjectRules:this.Constant.projectRules,projectTypeOptions:this.Constant.projectType,today:null}},mounted:function(){var e=new Date;e.setHours(0,0,0,0),this.today=e.getTime(),this.project.scheduledDate=Object(b["a"])(e),this.project.deliveryDate=Object(b["a"])(e)},methods:{goBack:function(){this.$emit("changePage")},resetForm:function(){this.$refs.project.resetFields()},addProject:function(){var e=this;this.$refs.projectInline.validate((function(t){e.$refs.project.validate((function(a){if(!t||!a)return!1;Object(c["a"])(e.project).then((function(t){e.$message.success("立项成功"),e.goBack()})).catch((function(e){console.info(e)}))}))}))}}},v=j,y=(a("37de"),Object(d["a"])(v,f,g,!1,null,"675a9c9e",null)),w=y.exports,_={components:{Search:h,Add:w},data:function(){return{searchPage:!0}},methods:{changePage:function(){this.searchPage=!this.searchPage},selectProject:function(e){var t=this;this.$store.dispatch("project/getCurrentProject",e.id).then((function(){t.$router.replace({path:"/project-detail"})}))}}},x=_,I=Object(d["a"])(x,n,r,!1,null,"e53ff35e",null);t["default"]=I.exports},c466:function(e,t,a){"use strict";function n(e){var t=new Date(e),a=t.getMonth()+1;return t.getFullYear()+"年"+a+"月"+t.getDate()+"日"}function r(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return(a<10?"0":"")+a+":"+(n<10?"0":"")+n+":"+(r<10?"0":"")+r}function i(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return t+"-"+(a<10?"0":"")+a+"-"+(n<10?"0":"")+n}a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}))},cf45:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i}));var n=a("61f7");function r(e,t,a){t.data=e.records,t.total=e.total,t.page=e.current,a&&a()}function i(e){return Object(n["c"])(e)?null:e}}}]);